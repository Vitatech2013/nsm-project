<div class="div">
    <mat-card class="mat-elevation-z0">
        <form action="" [formGroup]="posBillForm" (ngSubmit)="insertsales()">

            <mat-form-field appearance="outline" class="name">
                <mat-label>Customer Name</mat-label>
                <input matInput formControlName="name" placeholder="CustomerName" type="text">
            </mat-form-field>
            <mat-form-field appearance="outline" class="name">
                <mat-label>Mobile Number</mat-label>
                <input matInput formControlName="mobile" placeholder="Mobile Number">
            </mat-form-field>
            <mat-form-field appearance="outline" class="name">
                <mat-label>Doctor</mat-label>
                <input matInput formControlName="doctorId" placeholder="Doctor" type="text">
            </mat-form-field>
            <div class="card-margin">
                <div class="mat-table matTable">
                    <table mat-table matSort [dataSource]="dataSource" class="mat-elevation-z2">
                        <ng-container matColumnDef="mbId">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>S.No</th>
                            <td mat-cell *matCellDef="let element"> {{dataSource.filteredData.indexOf(element)+1}} </td>
                        </ng-container>
                        <ng-container matColumnDef="mbName">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
                            <!-- <td mat-cell *matCellDef="let element"> {{element.mbName}} </td> -->
                            <td mat-cell *matCellDef="let element;let j= index">
                                <input type="text" [matAutocomplete]="auto" style="width: 100px;"
                                    (keyup)="medicineFilter($event)" class="input"
                                    (input)="addItem($event,'mbName',dataSource.filteredData.indexOf(element))">
                                <mat-autocomplete #auto="matAutocomplete"
                                    (optionSelected)="addItem($event,'mbName',dataSource.filteredData.indexOf(element))">
                                    <mat-option *ngFor="let option of batchData" [value]="option.mbName"
                                        (click)="medicibeId(option.mbId,j)">
                                        {{option.mbName}}
                                    </mat-option>
                                </mat-autocomplete>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="mbBatch">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> mbBatch </th>
                            <!-- <td mat-cell *matCellDef="let element"> {{element.mbBatch}} </td> -->
                            <td mat-cell *matCellDef="let element;let b = index;" style="width: 1px;">
                                <input class="allInput" [formControl]="mbBatch[b]" readonly
                                    (input)="addItem($event,'mbBatch',dataSource.filteredData.indexOf(element))">
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="mbQuantity">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> mbQuantity </th>
                            <!-- <td mat-cell *matCellDef="let element"> {{element.mbBatch}} </td> -->
                            <td mat-cell *matCellDef="let element;let b = index;" style="width: 1px;">
                                <input class="allInput" [formControl]="mbQuantity[b]" readonly
                                    (input)="addItem($event,'mbQuantity',dataSource.filteredData.indexOf(element))">
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="Quantity">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Quantity </th>
                            <!-- <td mat-cell *matCellDef="let element"> {{element.mbBatch}} </td> -->
                            <td mat-cell *matCellDef="let element;let b = index;" style="width: 1px;">
                                <input class="allInput" [formControl]="" (keyup)="medicibeId(element.mbId,b)"
                                    (input)="addItem($event,'Quantity',dataSource.filteredData.indexOf(element))">
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="mPrice">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> mPrice </th>
                            <!-- <td mat-cell *matCellDef="let element"> {{element.mbBatch}} </td> -->
                            <td mat-cell *matCellDef="let element;let b = index;" style="width: 1px;">
                                <input class="allInput" [formControl]="this.perMPrice[b]" readonly
                                    (input)="addItem($event,'mPrice',dataSource.filteredData.indexOf(element))">
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="mbPurchasePrice">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> mbPurchasePrice </th>
                            <!-- <td mat-cell *matCellDef="let element"> {{element.mbPurchasePrice}} </td> -->
                            <td mat-cell *matCellDef="let element;let j = index;" style="width: 1px;">
                                <input class="allInput" [formControl]="mbPurchasePrice[j]" readonly
                                    (input)="addItem($event,'mbPurchasePrice',dataSource.filteredData.indexOf(element))">
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="mbTax">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> mbTax </th>
                            <td mat-cell *matCellDef="let element;let j = index;" style="width: 1px;">
                                <input class="allInput" [formControl]="mbTax[j]" readonly
                                    (input)="addItem($event,'mbTax',dataSource.filteredData.indexOf(element))">
                            </td>
                            <!-- <td mat-cell *matCellDef="let element"> {{element.mbTax }} </td> -->
                        </ng-container>
                        <ng-container matColumnDef="mbTaxPrice">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> mbTaxPrice </th>
                            <td mat-cell *matCellDef="let element;let j = index;" style="width: 1px;">
                                <input class="allInput" [formControl]="mbTaxPrice[j]" readonly
                                    (input)="addItem($event,'mbTaxPrice',dataSource.filteredData.indexOf(element))">
                            </td>
                            <!-- <td mat-cell *matCellDef="let element"> {{element.mbTaxPrice }} </td> -->
                        </ng-container>
                        <ng-container matColumnDef="mbPrice">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> mbPrice </th>
                            <!-- <td mat-cell *matCellDef="let element"> {{element.mbPrice}} </td> -->
                            <td mat-cell *matCellDef="let element;let j = index;" style="width: 1px;">
                                <input class="allInput" [formControl]="mbPrice[j]" readonly
                                    (input)="addItem($event,'mbPrice',dataSource.filteredData.indexOf(element))">
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="mbamount">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> mbamount </th>
                            <!-- <td mat-cell *matCellDef="let element"> {{element.mbPrice}} </td> -->
                            <td mat-cell *matCellDef="let element;let j = index;" style="width: 1px;">
                                <input class="allInput" [formControl]="this.mbamount[j]" readonly
                                    (input)="addItem($event,'this.mbamount',dataSource.filteredData.indexOf(element))">
                            </td>
                        </ng-container>
                        <!-- <ng-container matColumnDef="mbPrice">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> mbPrice </th>
                            <!-- <td mat-cell *matCellDef="let element"> {{element.mbPrice}} </td> -->
                        <!-- <td mat-cell *matCellDef="let element;let j = index;" style="width: 1px;">
                                <input class="allInput"  [formControl]="mbPrice[j]" readonly
                                    (input)="addItem($event,'mbPrice',dataSource.filteredData.indexOf(element))">
                            </td>
                        </ng-container> -->
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>

                    <mat-toolbar>
                        <button mat-stroked-button color="primary" (click)="addRow()">Add Item</button>
                        <!-- <button mat-raised-button color="primary" (click)="addRow()">Add Item</button> -->
                    </mat-toolbar>
                </div>
            </div>


            <mat-form-field appearance="outline" class="value">
                <mat-label>5% Value</mat-label>
                <input matInput formControlName="value5" [value]=" this.gstValue5" placeholder="Value2" type="number">
            </mat-form-field>
            <mat-form-field appearance="outline" class="value">
                <mat-label>12% Value</mat-label>
                <input matInput formControlName="value12" [value]=" this.gstValue12" placeholder="Value3" type="number">
            </mat-form-field>
            <mat-form-field appearance="outline" class="value">
                <mat-label>18% Value</mat-label>
                <input matInput formControlName="value18" [value]="  this.gstValue18" placeholder="Value4"
                    type="number">
            </mat-form-field>
            <mat-form-field appearance="outline" class="value">
                <mat-label>28% Value</mat-label>
                <input matInput formControlName="value28" [value]=" this.gstValue28" placeholder="Value4" type="number">
            </mat-form-field>

            <mat-form-field appearance="outline" class="value">
                <mat-label>5% Gst</mat-label>
                <input matInput formControlName="gst5" [value]="this.gstPrice5" placeholder="Value2" type="number">
            </mat-form-field>
            <mat-form-field appearance="outline" class="value">
                <mat-label>12% Gst</mat-label>
                <input matInput formControlName="gst12" [value]="this.gstPrice12" placeholder="Value3" type="number">
            </mat-form-field>
            <mat-form-field appearance="outline" class="value">
                <mat-label>18% Gst</mat-label>
                <input matInput formControlName="gst18" [value]="this.gstPrice18" placeholder="Value4" type="number">
            </mat-form-field>
            <mat-form-field appearance="outline" class="value">
                <mat-label>28% Gst</mat-label>
                <input matInput formControlName="gst28" [value]="this.gstPrice28" placeholder="Value4" type="number">
            </mat-form-field>
            <mat-form-field appearance="outline" class="name">
                <mat-label>description</mat-label>
                <input matInput formControlName="description" placeholder="description" type="text">
            </mat-form-field>
            <mat-form-field appearance="outline" class="name">
                <mat-label>0% Value</mat-label>
                <input matInput formControlName="value0" [value]=" this.gstValue0" type="number">
            </mat-form-field>
            <mat-form-field appearance="outline" class="name">
                <mat-label>Total Gst</mat-label>
                <input matInput formControlName="totalGst" [(ngModel)]="this.totalGstPrice" placeholder="Value1"
                    type="number">
            </mat-form-field>
            
            <div class="row">
                <div class="col-sm-9"> </div>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <div class="col-sm-2">
                    <mat-form-field appearance="outline" style="max-width: 190px;" class="value">
                        <mat-label>Discount%</mat-label>
                        <input matInput formControlName="discount" (input)="Discount($event)" placeholder="Discount"
                            type="number">
                    </mat-form-field>
                </div>
                <div class="col-sm-1"></div>
            </div>

            <div class="row">
                <div class="col-sm-9"></div>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <div class="col-sm-2">
                    <mat-form-field appearance="outline" style="max-width: 190px;" class="value">
                        <mat-label>DiscountAmount</mat-label>
                        <input matInput formControlName="discountAmt" [(ngModel)]="this.disAmt"
                            placeholder="discountAmt" type="number">
                    </mat-form-field>
                </div>
                <div class="col-sm-1">
                </div>
            </div>
            <div class="row">
                <div class="col-sm-9"></div>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <div class="col-sm-2">
                    <mat-form-field appearance="outline" style="max-width: 190px;">
                        <mat-label>subTotal</mat-label>
                        <input matInput formControlName="subTotal" [(ngModel)]="this.amount" placeholder="Value1"
                            type="number">
                    </mat-form-field>
                </div>
                <div class="col-sm-1"></div>
            </div>
            <div class="row">
                <div class="col-sm-9"></div>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <div class="col-sm-2">
                    <mat-form-field appearance="outline" style="max-width: 190px;">
                        <mat-label>NetAmount</mat-label>
                        <input matInput formControlName="netAmt" [(ngModel)]=" this.total" placeholder="discountAmt"
                            type="number">
                    </mat-form-field>
                </div>
                <div class="col-sm-1"></div>
            </div>
            <div class="row">
                <div class="col-sm-9"></div>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <div class="col-sm-2">
                    <button mat-raised-button class="newButton" color="primary">
                        Save
                    </button>
                </div>
                <div class="col-sm-1"></div>
            </div>
            <br>
            <br>
        </form>
    </mat-card>
</div>