<div class="card-margin mat-elevation-z3">
    <div class="mat-table matTable">
        <mat-card class="mat-elevation-z0">
            <form action="" [formGroup]="attendanceForm" >
                <mat-form-field class="example-full-width" appearance="fill">
                    <mat-label>Choose a date</mat-label>
                    <input matInput [min]="minDate" [max]="maxDate" date-format="yyyy-MM-dd"  formControlName="date"  [matDatepicker]="picker" (dateChange)="getdata()"
                     >
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field><br>
                <span class="button"></span>
            </form>
        </mat-card>
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z0" >
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef> SNo. </th>
                <td mat-cell *matCellDef="let element">{{dataSource.filteredData.indexOf(element)+1}} </td>
            </ng-container>
            <!-- <ng-container matColumnDef="roleId">
                <th mat-header-cell *matHeaderCellDef> Role </th>
                <td mat-cell *matCellDef="let element"> {{element.user.role.role}} </td>
            </ng-container> -->
            <ng-container matColumnDef="userId">
                <th mat-header-cell *matHeaderCellDef> UserInfo </th>
                 <td mat-cell *matCellDef="let element"> {{element.user.fullName}}  <!--  {{element.eMail}} -->  </td>
                
            </ng-container>
            <ng-container matColumnDef="Persent">
                        <th mat-header-cell *matHeaderCellDef>
                                Persent
                        </th>
                <span class="example-list-section" >
                    <td mat-cell *matCellDef="let element">
                        <mat-radio-group [(ngModel)]="element.holidayCompleted">
                            <mat-radio-button class="example-margin"  value="Persent"  (ngModelChange)="updateAllComplete()" (change)="data(element.id,element.user.id,$event)">Persent</mat-radio-button>
                        </mat-radio-group>
                    </td>
                </span>
            </ng-container>
            <ng-container matColumnDef="Absent">
                        <th mat-header-cell *matHeaderCellDef>
                                Absent
                        </th>
                <span class="example-list-section">
                    <td mat-cell *matCellDef="let element">
                        <mat-radio-group [(ngModel)]="element.holidayCompleted">
                            <mat-radio-button class="example-margin"  value="Absent" (ngModelChange)="absentUpdateAllComplete()" (change)="data(element.id,element.user.id,$event)">Absent</mat-radio-button>
                        </mat-radio-group>
                    </td>
                </span>
            </ng-container>
            <ng-container matColumnDef="Late">
                <section class="example-section">
                    <span class="example-list-section">
                        <th mat-header-cell *matHeaderCellDef>
                                Late
                        </th>
                    </span>
                </section>
                <span class="example-list-section">
                    <td mat-cell *matCellDef="let element">
                        <mat-radio-group [(ngModel)]="element.holidayCompleted">
                            <mat-radio-button class="example-margin"  value="Late"  (ngModelChange)="lateUpdateAllComplete()" (change)="data(element.id,element.user.id,$event)">Late</mat-radio-button>
                        </mat-radio-group>
                    </td>
                </span>
            </ng-container>
            <ng-container matColumnDef="Holiday">
                        <th mat-header-cell *matHeaderCellDef>
                                Holiday
                        </th>
                <span class="example-list-section">
                    <td mat-cell *matCellDef="let element">
                        <mat-radio-group [(ngModel)]="element.holidayCompleted">
                            <mat-radio-button class="example-margin"  value="Holiday"   (ngModelChange)="holidayUpdateAllComplete()" (change)="data(element.id,element.user.id,$event)">Holiday</mat-radio-button>
                        </mat-radio-group>
                    </td>
                </span>
            </ng-container>
            <ng-container matColumnDef="OnLeave">
                        <th mat-header-cell *matHeaderCellDef>
                                OnLeave
                        </th>
                <span class="example-list-section" >
                    <td mat-cell *matCellDef="let element">
                    <mat-radio-group [(ngModel)]="element.holidayCompleted" >
                   <mat-radio-button class="example-margin"  value="OnLeave"  (ngModelChange)="onLeaveUpdateAllComplete()" (change)="data(element.id,element.user.id,$event)">OnLeave</mat-radio-button>
                    </mat-radio-group>
                    </td>
                </span>
            </ng-container>
            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef> Description </th>
                <td mat-cell *matCellDef="let element">
                    <mat-form-field appearance="outline" style="height: 70px"><input matInput type="text"  (input)="Description($event)" placeholder="Description" formControlName="description"></mat-form-field></td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar>
        <p class="mat-body-1" *ngIf="total <= 0">No Items found!</p>
        <mat-paginator #paginator [length]="total" [showFirstLastButtons]="true" [pageSize]="pageSize"
            [pageSizeOptions]="totalLength">
        </mat-paginator>
        <span class="spacer"></span>  
        <button type="submit" mat-raised-button style="margin-left: 400px;" *ngIf="button"  color="primary" (click)="insertData()">Add</button>
    <br></div>
</div>
